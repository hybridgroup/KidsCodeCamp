- cancel_form_path = false
= form_for @post, :html => {:class => 'post_form'} do |f|
  - if @post.errors.any?
    #error_explanation
      %h2.title= "#{pluralize(@post.errors.count, "error")} prohibited this post from being saved:"
      %ul
        - @post.errors.full_messages.each do |msg|
          %li= msg

  = f.hidden_field :user_id, :value => current_user.id

  //// Dynamic inputs form logic
  - if action_name == 'show'
    = f.hidden_field :parent_id, {:value => params[:id]}
  - elsif @post.parent_id.present?
    = f.hidden_field :parent_id

  - if user_signed_in?
    - if action_name != 'show' # New/Edit Main or Edit Reponse
      - if @post.parent_id.present? # Edit Response
        - cancel_form_path = post_path(@post.parent_id)
      - else # New/Edit Main
        .input.select
          = f.label :category, "Category"
          = f.select :category, options_for_select(['General','Discussion','Teachers'])
    
        .input.text
          = f.label :title, "Title"
          = f.text_field :title

        - if action_name == 'edit' # Edit Main
          - cancel_form_path = post_path(@post)
        - else # New Main
          - cancel_form_path = posts_path

  //// Static inputs

  .input.textarea
    - if action_name != 'show'
      = f.label :content, "Content"
    = f.text_area :content

  .actions
    = image_submit_tag "bt-submit.png"
    - if cancel_form_path
      = raw ' or ' + link_to('Cancel', cancel_form_path)
